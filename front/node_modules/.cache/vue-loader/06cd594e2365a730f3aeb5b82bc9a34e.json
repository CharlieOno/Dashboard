{"remainingRequest":"/app/node_modules/vue-loader/lib/index.js??vue-loader-options!/app/src/components/Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/app/src/components/Login.vue","mtime":1574502975962},{"path":"/app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/app/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBHb29nbGVMb2dpbiBmcm9tICd2dWUtZ29vZ2xlLWxvZ2luJzsKCmNvbnN0ICAgUEVORElORyA9IDA7CmNvbnN0ICAgRVJST1JfQVJHUyA9IDE7CmNvbnN0ICAgV1JPTkdfQ1JFREVOVElBTFMgPSAyOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdMb2dpbicsCiAgcHJvcHM6IHsKICAgICAgc3RhdGU6IHsKICAgICAgICAgIHR5cGU6IFN0cmluZywKICAgICAgICAgIGRlZmF1bHQ6ICcnCiAgICAgIH0KICB9LAogIGRhdGEoKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgICBlbWFpbDogIiIsCiAgICAgICAgICBwYXNzd29yZDogIiIsCiAgICAgICAgICBsb2dpblN0YXR1czogUEVORElORywKICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICAgICAgY2xpZW50X2lkOiAieHh4eHh4IgogICAgICAgICAgICB9LAogICAgICAgICAgICAvLyBvbmx5IG5lZWRlZCBpZiB5b3Ugd2FudCB0byByZW5kZXIgdGhlIGJ1dHRvbiB3aXRoIHRoZSBnb29nbGUgdWkKICAgICAgICAgICAgcmVuZGVyUGFyYW1zOiB7CiAgICAgICAgICAgICAgICB3aWR0aDogMjUwLAogICAgICAgICAgICAgICAgaGVpZ2h0OiA1MCwKICAgICAgICAgICAgICAgIGxvbmd0aXRsZTogdHJ1ZQogICAgICAgICAgICB9CiAgICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgICAgY2xvc2UoKSB7CiAgICAgICAgICB0aGlzLiRlbWl0KCd1cGRhdGUtc3RhdGUnLCAnJyk7CiAgICAgIH0sCiAgICAgIGxvZ2luKCkgewogICAgICAgICAgICB0aGlzLmF4aW9zLnBvc3QoYGh0dHA6Ly9sb2NhbGhvc3Q6ODA4MC9sb2dpbj9lbWFpbD0ke3RoaXMuZW1haWx9JnBhc3N3b3JkPSR7dGhpcy5wYXNzd29yZH0vYCkKICAgICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YSA9PT0gIkUtbWFpbCBvciBwYXNzd29yZCBkb2Vzbid0IGV4aXN0LiIpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ2luU3RhdHVzID0gRVJST1JfQVJHUzsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLmRhdGEgPT09ICJObyB1c2VyIGFzc29jaWF0ZWQuIikgewogICAgICAgICAgICAgICAgICAgIHRoaXMubG9naW5TdGF0dXMgPSBXUk9OR19DUkVERU5USUFMUzsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJhdXRoVG9rZW4iLCByZXNwb25zZS5kYXRhKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pCiAgICAgIH0sCiAgICAgIGxvZ2luR29vZ2xlKCkgewogICAgICAgICAgICAvLzk1MTY4NjgxNTEyMC1zZzRrNzlydmcyZWgzNHY1dWtrM3R2ZWQ2azBtMGlqZy5hcHBzLmdvb2dsZXVzZXJjb250ZW50LmNvbQogICAgICAgICAgICAvL3ZLYVdNcks1V2dMcnhNQ0hwZ2kya0M2SAogICAgICAgICAgICB2YXIgcHJvZmlsZSA9IGdvb2dsZVVzZXIuZ2V0QmFzaWNQcm9maWxlKCk7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdJRDogJyArIHByb2ZpbGUuZ2V0SWQoKSk7IC8vIERvIG5vdCBzZW5kIHRvIHlvdXIgYmFja2VuZCEgVXNlIGFuIElEIHRva2VuIGluc3RlYWQuCiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdOYW1lOiAnICsgcHJvZmlsZS5nZXROYW1lKCkpOwogICAgICAgICAgICBjb25zb2xlLmxvZygnSW1hZ2UgVVJMOiAnICsgcHJvZmlsZS5nZXRJbWFnZVVybCgpKTsKICAgICAgICAgICAgY29uc29sZS5sb2coJ0VtYWlsOiAnICsgcHJvZmlsZS5nZXRFbWFpbCgpKTsgLy8gVGhpcyBpcyBudWxsIGlmIHRoZSAnZW1haWwnIHNjb3BlIGlzIG5vdCBwcmVzZW50LgogICAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuDA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/components","sourcesContent":["<template>\n    <div class=\"modal\" :class=\"state\">\n        <div class=\"modal-background\" @click=\"close()\"></div>\n        <div class=\"modal-card\">\n            <header class=\"modal-card-head\">\n                <p class=\"modal-card-title title is-4\">Connexion</p>\n            </header>\n            <section class=\"modal-card-body columns\" style=\"margin-bottom: inherit;\">\n                <div class=\"column is-7\" style=\"border-right: 1px inset;\">\n                    <p class=\"title is-6\">J'ai déjà un compte Audionet</p>\n                    <form>\n                        <div class=\"field\">\n                            <p class=\"control has-icons-left\">\n                                <input v-on:keyup.enter=\"login()\" v-model=\"email\" class=\"input\" type=\"email\" placeholder=\"Email\">\n                                <span class=\"icon is-small is-left\">\n                                <i class=\"fas fa-envelope\"></i>\n                                </span>\n                            </p>\n                        </div>\n                        <div class=\"field\">\n                            <p class=\"control has-icons-left\">\n                                <input v-on:keyup.enter=\"login()\" autocomplete v-model=\"password\" class=\"input\" type=\"password\" placeholder=\"Password\">\n                                <span class=\"icon is-small is-left\">\n                                <i class=\"fas fa-lock\"></i>\n                                </span>\n                            </p>\n                        </div>\n                    </form>\n                </div>\n                <div class=\"column is-5\">\n                    <p class=\"title is-6\">En quelques clics</p>\n                    <GoogleLogin\n                        :params=\"params\"\n                        :renderParams=\"renderParams\"\n                        :onSuccess=\"onSuccess\"\n                        :onFailure=\"onFailure\">\n                    </GoogleLogin>\n                </div>\n                <div class=\"notification is-danger\" v-if=\"loginStatus === 1\">\n                    Veuillez rentrer vos identifiants.\n                </div>\n                <div class=\"notification is-danger\" v-if=\"loginStatus === 2\">\n                    E-mail et/ou mot de passe incorrect.\n                </div>\n            </section>\n            <footer class=\"modal-card-foot\">\n                <button class=\"button is-primary\" v-on:click=\"login()\">Se connecter</button>\n                <button class=\"button\" v-on:click=\"close()\">Annuler</button>\n            </footer>\n        </div>\n        <button class=\"modal-close is-large\" aria-label=\"close\" @click=\"close()\"></button>\n    </div>\n</template>\n\n<script>\nimport GoogleLogin from 'vue-google-login';\n\nconst   PENDING = 0;\nconst   ERROR_ARGS = 1;\nconst   WRONG_CREDENTIALS = 2;\n\nexport default {\n  name: 'Login',\n  props: {\n      state: {\n          type: String,\n          default: ''\n      }\n  },\n  data() {\n      return {\n          email: \"\",\n          password: \"\",\n          loginStatus: PENDING,\n          params: {\n                client_id: \"xxxxxx\"\n            },\n            // only needed if you want to render the button with the google ui\n            renderParams: {\n                width: 250,\n                height: 50,\n                longtitle: true\n            }\n      }\n  },\n  methods: {\n      close() {\n          this.$emit('update-state', '');\n      },\n      login() {\n            this.axios.post(`http://localhost:8080/login?email=${this.email}&password=${this.password}/`)\n            .then((response) => {\n                if (response.data === \"E-mail or password doesn't exist.\") {\n                    this.loginStatus = ERROR_ARGS;\n                    return;\n                } else if (response.data === \"No user associated.\") {\n                    this.loginStatus = WRONG_CREDENTIALS;\n                    return;\n                } else {\n                    localStorage.setItem(\"authToken\", response.data);\n                    this.close();\n                }\n            })\n      },\n      loginGoogle() {\n            //951686815120-sg4k79rvg2eh34v5ukk3tved6k0m0ijg.apps.googleusercontent.com\n            //vKaWMrK5WgLrxMCHpgi2kC6H\n            var profile = googleUser.getBasicProfile();\n            console.log('ID: ' + profile.getId()); // Do not send to your backend! Use an ID token instead.\n            console.log('Name: ' + profile.getName());\n            console.log('Image URL: ' + profile.getImageUrl());\n            console.log('Email: ' + profile.getEmail()); // This is null if the 'email' scope is not present.\n      }\n  }\n}\n</script>\n\n<style>\n\ndiv {\n    -webkit-column-rule: 4px double #ff00ff; /* Chrome, Safari, Opera */\n  -moz-column-rule: 4px double #ff00ff; /* Firefox */\n  column-rule: 4px double #ff00ff;\n}\n\n</style>"]}]}