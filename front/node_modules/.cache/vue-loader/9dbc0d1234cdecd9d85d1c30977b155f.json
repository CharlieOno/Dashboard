{"remainingRequest":"/app/node_modules/vue-loader/lib/index.js??vue-loader-options!/app/src/components/Home.vue?vue&type=script&lang=js&","dependencies":[{"path":"/app/src/components/Home.vue","mtime":1577642771160},{"path":"/app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/app/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBTcG90aWZ5TGFzdFNvbmdzQ29uZmlnIGZyb20gJy4vU3BvdGlmeUxhc3RTb25nc0NvbmZpZyc7CmltcG9ydCBTcG90aWZ5TGFzdFNvbmdzIGZyb20gJy4vU3BvdGlmeUxhc3RTb25ncyc7CmltcG9ydCBTcG90aWZ5VG9wVHJhY2tzQ29uZmlnIGZyb20gJy4vU3BvdGlmeVRvcFRyYWNrc0NvbmZpZyc7CmltcG9ydCBTcG90aWZ5VG9wVHJhY2tzIGZyb20gJy4vU3BvdGlmeVRvcFRyYWNrcyc7CmltcG9ydCBTcG90aWZ5UmVsYXRlZEFydGlzdHNDb25maWcgZnJvbSAnLi9TcG90aWZ5UmVsYXRlZEFydGlzdHNDb25maWcnOwppbXBvcnQgU3BvdGlmeVJlbGF0ZWRBcnRpc3RzIGZyb20gJy4vU3BvdGlmeVJlbGF0ZWRBcnRpc3RzJzsKaW1wb3J0IERlZXplckxhc3RTb25nc0NvbmZpZyBmcm9tICcuL0RlZXplckxhc3RTb25nc0NvbmZpZyc7CmltcG9ydCBEZWV6ZXJMYXN0U29uZ3MgZnJvbSAnLi9EZWV6ZXJMYXN0U29uZ3MnOwppbXBvcnQgRGVlemVyVG9wVHJhY2tzQ29uZmlnIGZyb20gJy4vRGVlemVyVG9wVHJhY2tzQ29uZmlnJzsKaW1wb3J0IERlZXplclRvcFRyYWNrcyBmcm9tICcuL0RlZXplclRvcFRyYWNrcyc7CmltcG9ydCBEZWV6ZXJSZWxhdGVkQXJ0aXN0c0NvbmZpZyBmcm9tICcuL0RlZXplclJlbGF0ZWRBcnRpc3RzQ29uZmlnJzsKaW1wb3J0IERlZXplclJlbGF0ZWRBcnRpc3RzIGZyb20gJy4vRGVlemVyUmVsYXRlZEFydGlzdHMnOwoKY2xhc3MgV2lkZ2V0IHsKCiAgY29uc3RydWN0b3IodHlwZSwgZGF0YSwgbmFtZSwgaWQpIHsKICAgIGlmIChpZCA9PT0gMCkgewogICAgICB0aGlzLmlkID0gdGhpcy51dWlkdjQoKTsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMuaWQgPSBpZDsKICAgIH0KICAgIHRoaXMudHlwZSA9IHR5cGU7CiAgICB0aGlzLm5hbWUgPSBuYW1lOwogICAgdGhpcy5kYXRhID0gZGF0YTsKICB9CgogIHV1aWR2NCgpIHsKICAgIHJldHVybiAneHh4eHh4eHgteHh4eC00eHh4LXl4eHgteHh4eHh4eHh4eHh4Jy5yZXBsYWNlKC9beHldL2csIGZ1bmN0aW9uKGMpIHsKICAgICAgdmFyIHIgPSBNYXRoLnJhbmRvbSgpICogMTYgfCAwLCB2ID0gYyA9PSAneCcgPyByIDogKHIgJiAweDMgfCAweDgpOwogICAgICByZXR1cm4gdi50b1N0cmluZygxNik7CiAgICB9KTsKICB9Cn0KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnaG9tZScsCiAgY29tcG9uZW50czogewogICAgU3BvdGlmeUxhc3RTb25nc0NvbmZpZywKICAgIFNwb3RpZnlMYXN0U29uZ3MsCiAgICBTcG90aWZ5VG9wVHJhY2tzQ29uZmlnLAogICAgU3BvdGlmeVRvcFRyYWNrcywKICAgIFNwb3RpZnlSZWxhdGVkQXJ0aXN0c0NvbmZpZywKICAgIFNwb3RpZnlSZWxhdGVkQXJ0aXN0cywKICAgIERlZXplckxhc3RTb25nc0NvbmZpZywKICAgIERlZXplckxhc3RTb25ncywKICAgIERlZXplclRvcFRyYWNrc0NvbmZpZywKICAgIERlZXplclRvcFRyYWNrcywKICAgIERlZXplclJlbGF0ZWRBcnRpc3RzQ29uZmlnLAogICAgRGVlemVyUmVsYXRlZEFydGlzdHMKICB9LAogIGNyZWF0ZWQoKSB7CiAgICB2YXIgdXJsT2JqZWN0ID0gKG5ldyBVUkwod2luZG93LmxvY2F0aW9uLmhyZWYpKS5zZWFyY2hQYXJhbXM7CiAgICB2YXIgdXJsUGFyYW1zID0gdGhpcy5nZXRVcmxWYXJzKCk7CgogICAgaWYgKHRoaXMuYXV0aFRva2VuICE9PSAwICYmIHVybE9iamVjdC5nZXQoJ3Nwb3RpZnknKSA9PT0gInRydWUiICYmIHVybFBhcmFtcy5hY2Nlc3NfdG9rZW4gJiYgdGhpcy5zcG90aWZ5VG9rZW4gPT09IDApIHsKICAgICAgdGhpcy5heGlvcy5wb3N0KGBodHRwOi8vbG9jYWxob3N0OjgwODAvbG9naW4vc3BvdGlmeT9hdXRoX3Rva2VuPSR7dGhpcy5hdXRoVG9rZW59JnNwb3RpZnlfdG9rZW49JHt1cmxQYXJhbXMuYWNjZXNzX3Rva2VufS9gKQogICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdzcG90aWZ5VG9rZW4tJyArIHRoaXMuYXV0aFRva2VuLCB1cmxQYXJhbXMuYWNjZXNzX3Rva2VuKTsKICAgICAgICAgIHRoaXMuJGZvcmNlVXBkYXRlKCk7CiAgICAgIH0pCiAgICB9CiAgICBpZiAodGhpcy5hdXRoVG9rZW4gIT09IDAgJiYgdXJsT2JqZWN0LmdldCgnZGVlemVyJykgPT09ICJ0cnVlIiAmJiB1cmxQYXJhbXMuYWNjZXNzX3Rva2VuICYmIHRoaXMuZGVlemVyVG9rZW4gPT09IDApIHsKICAgICAgdGhpcy5heGlvcy5wb3N0KGBodHRwOi8vbG9jYWxob3N0OjgwODAvbG9naW4vZGVlemVyP2F1dGhfdG9rZW49JHt0aGlzLmF1dGhUb2tlbn0mZGVlemVyX3Rva2VuPSR7dXJsUGFyYW1zLmFjY2Vzc190b2tlbn0vYCkKICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZGVlemVyVG9rZW4tJyArIHRoaXMuYXV0aFRva2VuLCB1cmxQYXJhbXMuYWNjZXNzX3Rva2VuKTsKICAgICAgICAgIHRoaXMuJGZvcmNlVXBkYXRlKCk7CiAgICAgIH0pCiAgICB9CiAgICBpZiAodGhpcy5hdXRoVG9rZW4gIT09IDApIHsKICAgICAgdGhpcy5heGlvcy5wb3N0KGBodHRwOi8vbG9jYWxob3N0OjgwODAvbGlzdC93aWRnZXQ/YXV0aF90b2tlbj0ke3RoaXMuYXV0aFRva2VufWApCiAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgIHJlc3BvbnNlLmRhdGEuZm9yRWFjaCh3aWRnZXQgPT4gewogICAgICAgICAgdGhpcy53aWRnZXRzLnVuc2hpZnQobmV3IFdpZGdldCh3aWRnZXQudHlwZSwgd2lkZ2V0LmRhdGEsIHdpZGdldC5uYW1lLCB3aWRnZXQuaWQpKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc3BvdGlmeUxhc3RTb25nc1N0YXRlOiAnJywKICAgICAgc3BvdGlmeVRvcFRyYWNrc1N0YXRlOiAnJywKICAgICAgc3BvdGlmeVJlbGF0ZWRBcnRpc3RzU3RhdGU6ICcnLAogICAgICBkZWV6ZXJMYXN0U29uZ3NTdGF0ZTogJycsCiAgICAgIGRlZXplclRvcFRyYWNrc1N0YXRlOiAnJywKICAgICAgZGVlemVyUmVsYXRlZEFydGlzdHNTdGF0ZTogJycsCiAgICAgIGNvbmZpZ1dpZGdldElkOiAnJywKICAgICAgd2lkZ2V0czogW10sCiAgICAgIGdldCBhdXRoVG9rZW4oKSB7CiAgICAgICAgcmV0dXJuIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdhdXRoVG9rZW4nKSB8fCAwOwogICAgICB9LAogICAgICBzZXQgYXV0aFRva2VuKHZhbHVlKSB7CiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2F1dGhUb2tlbicsIHZhbHVlKTsKICAgICAgfSwKICAgICAgZ2V0IHNwb3RpZnlUb2tlbigpIHsKICAgICAgICByZXR1cm4gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Nwb3RpZnlUb2tlbi0nICsgdGhpcy5hdXRoVG9rZW4pIHx8IDA7CiAgICAgIH0sCiAgICAgIHNldCBzcG90aWZ5VG9rZW4odmFsdWUpIHsKICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnc3BvdGlmeVRva2VuLScgKyB0aGlzLmF1dGhUb2tlbiwgdmFsdWUpOwogICAgICB9LAogICAgICBnZXQgZGVlemVyVG9rZW4oKSB7CiAgICAgICAgcmV0dXJuIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdkZWV6ZXJUb2tlbi0nICsgdGhpcy5hdXRoVG9rZW4pIHx8IDA7CiAgICAgIH0sCiAgICAgIHNldCBkZWV6ZXJUb2tlbih2YWx1ZSkgewogICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdkZWV6ZXJUb2tlbi0nICsgdGhpcy5hdXRoVG9rZW4sIHZhbHVlKTsKICAgICAgfQogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgLy8KICAgIC8vICBMb2dpbiAvIExvZ291dCBmcm9tIFNwb3RpZnkrRGVlemVyCiAgICAvLwogICAgbG9naW5TcG90aWZ5KCkgewogICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IGBodHRwczovL2FjY291bnRzLnNwb3RpZnkuY29tL2F1dGhvcml6ZT9jbGllbnRfaWQ9MWRiNjA2NzNmY2Y2NDhhMTg5ZGZhYzA0YmViN2Q3MzUmcmVkaXJlY3RfdXJpPWAKICAgICAgKyBlbmNvZGVVUkkoImh0dHBzOi8vbG9jYWxob3N0OjMwMDA/c3BvdGlmeT10cnVlIikgKyBgJnJlc3BvbnNlX3R5cGU9dG9rZW5gOwogICAgfSwKICAgIGxvZ291dFNwb3RpZnkoKSB7CiAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdzcG90aWZ5VG9rZW4tJyArIHRoaXMuYXV0aFRva2VuKTsKICAgICAgdGhpcy4kZm9yY2VVcGRhdGUoKTsKICAgIH0sCiAgICBsb2dpbkRlZXplcigpIHsKICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBgaHR0cHM6Ly9jb25uZWN0LmRlZXplci5jb20vb2F1dGgvYXV0aC5waHA/YXBwX2lkPTM4Njc4NCZyZWRpcmVjdF91cmk9YAogICAgICArIGVuY29kZVVSSSgiaHR0cHM6Ly9sb2NhbGhvc3Q6MzAwMD9kZWV6ZXI9dHJ1ZSIpICsgYCZwZXJtcz1iYXNpY19hY2Nlc3MsZW1haWwmcmVzcG9uc2VfdHlwZT10b2tlbmA7CiAgICB9LAogICAgbG9nb3V0RGVlemVyKCkgewogICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnZGVlemVyVG9rZW4tJyArIHRoaXMuYXV0aFRva2VuKTsKICAgICAgdGhpcy4kZm9yY2VVcGRhdGUoKTsKICAgIH0sCiAgICAvLwogICAgLy8gIFV0aWxpdGllcwogICAgLy8KICAgIGdldFVybFZhcnMoKSB7CiAgICAgIHZhciB2YXJzID0ge307CiAgICAgIHZhciBwYXJ0cyA9IHRoaXMuJHJvdXRlLnBhdGgucmVwbGFjZSgvWy8/Jl0rKFtePSZdKyk9KFteJl0qKS9naSwgZnVuY3Rpb24obSxrZXksdmFsdWUsIHZhbHVlMikgewogICAgICAgICAgdmFyc1trZXldID0gdmFsdWU7CiAgICAgIH0pOwogICAgICByZXR1cm4gdmFyczsKICAgIH0sCiAgICAvLwogICAgLy8gIFdpZGdldCdzIGNvbW11bmljYXRpb24gd2l0aCBjb25maWd1cmF0aW9uIG1vZGFsCiAgICAvLwogICAgdG9nZ2xlU3BvdGlmeUxhc3RTb25ncygpIHsKICAgICAgaWYgKHRoaXMuc3BvdGlmeVRva2VuID09PSAwKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHRoaXMuc3BvdGlmeUxhc3RTb25nc1N0YXRlID0gJ2lzLWFjdGl2ZSc7CiAgICB9LAogICAgdXBkYXRlU3BvdGlmeUxhc3RTb25ncyhyZXMpIHsKICAgICAgdGhpcy5jb25maWdXaWRnZXRJZCA9ICcnOwogICAgICB0aGlzLnNwb3RpZnlMYXN0U29uZ3NTdGF0ZSA9IHJlcy5zdGF0ZTsKICAgICAgaWYgKHJlcy5pZCAhPT0gIm5vbmUiICYmIHJlcy5jb25maWcgPT09ICcnKSB7CiAgICAgICAgdmFyIHdpZGdldCA9IG5ldyBXaWRnZXQoJ3Nwb3RpZnlMYXN0U29uZ3MnLCByZXMuaWQsIHJlcy5uYW1lLCAwKTsKCiAgICAgICAgdGhpcy53aWRnZXRzLnVuc2hpZnQod2lkZ2V0KTsKICAgICAgICB0aGlzLmF4aW9zLnBvc3QoYGh0dHA6Ly9sb2NhbGhvc3Q6ODA4MC9yZWdpc3Rlci93aWRnZXQ/YXV0aF90b2tlbj0ke3RoaXMuYXV0aFRva2VufSZ3aWRnZXRfaWQ9JHt3aWRnZXQuaWR9JndpZGdldF90eXBlPSR7d2lkZ2V0LnR5cGV9JndpZGdldF9uYW1lPSR7d2lkZ2V0Lm5hbWV9JndpZGdldF9kYXRhPSR7d2lkZ2V0LmRhdGF9YCk7CiAgICAgIH0KICAgICAgaWYgKHJlcy5pZCAhPT0gJ25vbmUnICYmIHJlcy5jb25maWcgIT09ICcnKSB7CiAgICAgICAgdmFyIHggPSB0aGlzLndpZGdldHMubWFwKGZ1bmN0aW9uKGUpIHsgcmV0dXJuIGUuaWQ7IH0pLmluZGV4T2YocmVzLmNvbmZpZyk7CgogICAgICAgIHRoaXMud2lkZ2V0c1t4XS5kYXRhID0gcmVzLmlkOwogICAgICAgIHRoaXMud2lkZ2V0c1t4XS5uYW1lID0gcmVzLm5hbWU7CiAgICAgICAgdGhpcy5heGlvcy5wb3N0KGBodHRwOi8vbG9jYWxob3N0OjgwODAvcmVnaXN0ZXIvd2lkZ2V0P2F1dGhfdG9rZW49JHt0aGlzLmF1dGhUb2tlbn0md2lkZ2V0X2lkPSR7dGhpcy53aWRnZXRzW3hdLmlkfSZ3aWRnZXRfdHlwZT0ke3RoaXMud2lkZ2V0c1t4XS50eXBlfSZ3aWRnZXRfbmFtZT0ke3RoaXMud2lkZ2V0c1t4XS5uYW1lfSZ3aWRnZXRfZGF0YT0ke3RoaXMud2lkZ2V0c1t4XS5kYXRhfWApOwogICAgICB9CiAgICB9LAogICAgdG9nZ2xlU3BvdGlmeVRvcFRyYWNrcygpIHsKICAgICAgaWYgKHRoaXMuc3BvdGlmeVRva2VuID09PSAwKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHRoaXMuc3BvdGlmeVRvcFRyYWNrc1N0YXRlID0gJ2lzLWFjdGl2ZSc7CiAgICB9LAogICAgdXBkYXRlU3BvdGlmeVRvcFRyYWNrcyhyZXMpIHsKICAgICAgdGhpcy5jb25maWdXaWRnZXRJZCA9ICcnOwogICAgICB0aGlzLnNwb3RpZnlUb3BUcmFja3NTdGF0ZSA9IHJlcy5zdGF0ZTsKICAgICAgaWYgKHJlcy5pZCAhPT0gIm5vbmUiICYmIHJlcy5jb25maWcgPT09ICcnKSB7CiAgICAgICAgdmFyIHdpZGdldCA9IG5ldyBXaWRnZXQoJ3Nwb3RpZnlUb3BUcmFja3MnLCByZXMuaWQsIHJlcy5uYW1lLCAwKTsKCiAgICAgICAgdGhpcy53aWRnZXRzLnVuc2hpZnQod2lkZ2V0KTsKICAgICAgICB0aGlzLmF4aW9zLnBvc3QoYGh0dHA6Ly9sb2NhbGhvc3Q6ODA4MC9yZWdpc3Rlci93aWRnZXQ/YXV0aF90b2tlbj0ke3RoaXMuYXV0aFRva2VufSZ3aWRnZXRfaWQ9JHt3aWRnZXQuaWR9JndpZGdldF90eXBlPSR7d2lkZ2V0LnR5cGV9JndpZGdldF9uYW1lPSR7d2lkZ2V0Lm5hbWV9JndpZGdldF9kYXRhPSR7d2lkZ2V0LmRhdGF9YCk7CiAgICAgIH0KICAgICAgaWYgKHJlcy5pZCAhPT0gJ25vbmUnICYmIHJlcy5jb25maWcgIT09ICcnKSB7CiAgICAgICAgdmFyIHggPSB0aGlzLndpZGdldHMubWFwKGZ1bmN0aW9uKGUpIHsgcmV0dXJuIGUuaWQ7IH0pLmluZGV4T2YocmVzLmNvbmZpZyk7CgogICAgICAgIHRoaXMud2lkZ2V0c1t4XS5kYXRhID0gcmVzLmlkOwogICAgICAgIHRoaXMud2lkZ2V0c1t4XS5uYW1lID0gcmVzLm5hbWU7CiAgICAgICAgdGhpcy5heGlvcy5wb3N0KGBodHRwOi8vbG9jYWxob3N0OjgwODAvcmVnaXN0ZXIvd2lkZ2V0P2F1dGhfdG9rZW49JHt0aGlzLmF1dGhUb2tlbn0md2lkZ2V0X2lkPSR7dGhpcy53aWRnZXRzW3hdLmlkfSZ3aWRnZXRfdHlwZT0ke3RoaXMud2lkZ2V0c1t4XS50eXBlfSZ3aWRnZXRfbmFtZT0ke3RoaXMud2lkZ2V0c1t4XS5uYW1lfSZ3aWRnZXRfZGF0YT0ke3RoaXMud2lkZ2V0c1t4XS5kYXRhfWApOwogICAgICB9CiAgICB9LAogICAgdG9nZ2xlU3BvdGlmeVJlbGF0ZWRBcnRpc3RzKCkgewogICAgICBpZiAodGhpcy5zcG90aWZ5VG9rZW4gPT09IDApIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdGhpcy5zcG90aWZ5UmVsYXRlZEFydGlzdHNTdGF0ZSA9ICdpcy1hY3RpdmUnOwogICAgfSwKICAgIHVwZGF0ZVNwb3RpZnlSZWxhdGVkQXJ0aXN0cyhyZXMpIHsKICAgICAgdGhpcy5jb25maWdXaWRnZXRJZCA9ICcnOwogICAgICB0aGlzLnNwb3RpZnlSZWxhdGVkQXJ0aXN0c1N0YXRlID0gcmVzLnN0YXRlOwogICAgICBpZiAocmVzLmlkICE9PSAibm9uZSIgJiYgcmVzLmNvbmZpZyA9PT0gJycpIHsKICAgICAgICB2YXIgd2lkZ2V0ID0gbmV3IFdpZGdldCgnc3BvdGlmeVJlbGF0ZWRBcnRpc3RzJywgcmVzLmlkLCByZXMubmFtZSwgMCk7CgogICAgICAgIHRoaXMud2lkZ2V0cy51bnNoaWZ0KHdpZGdldCk7CiAgICAgICAgdGhpcy5heGlvcy5wb3N0KGBodHRwOi8vbG9jYWxob3N0OjgwODAvcmVnaXN0ZXIvd2lkZ2V0P2F1dGhfdG9rZW49JHt0aGlzLmF1dGhUb2tlbn0md2lkZ2V0X2lkPSR7d2lkZ2V0LmlkfSZ3aWRnZXRfdHlwZT0ke3dpZGdldC50eXBlfSZ3aWRnZXRfbmFtZT0ke3dpZGdldC5uYW1lfSZ3aWRnZXRfZGF0YT0ke3dpZGdldC5kYXRhfWApOwogICAgICB9CiAgICAgIGlmIChyZXMuaWQgIT09ICdub25lJyAmJiByZXMuY29uZmlnICE9PSAnJykgewogICAgICAgIHZhciB4ID0gdGhpcy53aWRnZXRzLm1hcChmdW5jdGlvbihlKSB7IHJldHVybiBlLmlkOyB9KS5pbmRleE9mKHJlcy5jb25maWcpOwoKICAgICAgICB0aGlzLndpZGdldHNbeF0uZGF0YSA9IHJlcy5pZDsKICAgICAgICB0aGlzLndpZGdldHNbeF0ubmFtZSA9IHJlcy5uYW1lOwogICAgICAgIHRoaXMuYXhpb3MucG9zdChgaHR0cDovL2xvY2FsaG9zdDo4MDgwL3JlZ2lzdGVyL3dpZGdldD9hdXRoX3Rva2VuPSR7dGhpcy5hdXRoVG9rZW59JndpZGdldF9pZD0ke3RoaXMud2lkZ2V0c1t4XS5pZH0md2lkZ2V0X3R5cGU9JHt0aGlzLndpZGdldHNbeF0udHlwZX0md2lkZ2V0X25hbWU9JHt0aGlzLndpZGdldHNbeF0ubmFtZX0md2lkZ2V0X2RhdGE9JHt0aGlzLndpZGdldHNbeF0uZGF0YX1gKTsKICAgICAgfQogICAgfSwKICAgIHRvZ2dsZURlZXplckxhc3RTb25ncygpIHsKICAgICAgaWYgKHRoaXMuZGVlemVyVG9rZW4gPT09IDApIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdGhpcy5kZWV6ZXJMYXN0U29uZ3NTdGF0ZSA9ICdpcy1hY3RpdmUnOwogICAgfSwKICAgIHVwZGF0ZURlZXplckxhc3RTb25ncyhyZXMpIHsKICAgICAgdGhpcy5jb25maWdXaWRnZXRJZCA9ICcnOwogICAgICB0aGlzLmRlZXplckxhc3RTb25nc1N0YXRlID0gcmVzLnN0YXRlOwogICAgICBpZiAocmVzLmlkICE9PSAibm9uZSIgJiYgcmVzLmNvbmZpZyA9PT0gJycpIHsKICAgICAgICB2YXIgd2lkZ2V0ID0gbmV3IFdpZGdldCgnZGVlemVyTGFzdFNvbmdzJywgcmVzLmlkLCByZXMubmFtZSwgMCk7CgogICAgICAgIHRoaXMud2lkZ2V0cy51bnNoaWZ0KHdpZGdldCk7CiAgICAgICAgdGhpcy5heGlvcy5wb3N0KGBodHRwOi8vbG9jYWxob3N0OjgwODAvcmVnaXN0ZXIvd2lkZ2V0P2F1dGhfdG9rZW49JHt0aGlzLmF1dGhUb2tlbn0md2lkZ2V0X2lkPSR7d2lkZ2V0LmlkfSZ3aWRnZXRfdHlwZT0ke3dpZGdldC50eXBlfSZ3aWRnZXRfbmFtZT0ke3dpZGdldC5uYW1lfSZ3aWRnZXRfZGF0YT0ke3dpZGdldC5kYXRhfWApOwogICAgICB9CiAgICAgIGlmIChyZXMuaWQgIT09ICdub25lJyAmJiByZXMuY29uZmlnICE9PSAnJykgewogICAgICAgIHZhciB4ID0gdGhpcy53aWRnZXRzLm1hcChmdW5jdGlvbihlKSB7IHJldHVybiBlLmlkOyB9KS5pbmRleE9mKHJlcy5jb25maWcpOwoKICAgICAgICB0aGlzLndpZGdldHNbeF0uZGF0YSA9IHJlcy5pZDsKICAgICAgICB0aGlzLndpZGdldHNbeF0ubmFtZSA9IHJlcy5uYW1lOwogICAgICAgIHRoaXMuYXhpb3MucG9zdChgaHR0cDovL2xvY2FsaG9zdDo4MDgwL3JlZ2lzdGVyL3dpZGdldD9hdXRoX3Rva2VuPSR7dGhpcy5hdXRoVG9rZW59JndpZGdldF9pZD0ke3RoaXMud2lkZ2V0c1t4XS5pZH0md2lkZ2V0X3R5cGU9JHt0aGlzLndpZGdldHNbeF0udHlwZX0md2lkZ2V0X25hbWU9JHt0aGlzLndpZGdldHNbeF0ubmFtZX0md2lkZ2V0X2RhdGE9JHt0aGlzLndpZGdldHNbeF0uZGF0YX1gKTsKICAgICAgfQogICAgfSwKICAgIHRvZ2dsZURlZXplclRvcFRyYWNrcygpIHsKICAgICAgaWYgKHRoaXMuZGVlemVyVG9rZW4gPT09IDApIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdGhpcy5kZWV6ZXJUb3BUcmFja3NTdGF0ZSA9ICdpcy1hY3RpdmUnOwogICAgfSwKICAgIHVwZGF0ZURlZXplclRvcFRyYWNrcyhyZXMpIHsKICAgICAgdGhpcy5jb25maWdXaWRnZXRJZCA9ICcnOwogICAgICB0aGlzLmRlZXplclRvcFRyYWNrc1N0YXRlID0gcmVzLnN0YXRlOwogICAgICBpZiAocmVzLmlkICE9PSAibm9uZSIgJiYgcmVzLmNvbmZpZyA9PT0gJycpIHsKICAgICAgICB2YXIgd2lkZ2V0ID0gbmV3IFdpZGdldCgnZGVlemVyVG9wVHJhY2tzJywgcmVzLmlkLCByZXMubmFtZSwgMCk7CgogICAgICAgIHRoaXMud2lkZ2V0cy51bnNoaWZ0KHdpZGdldCk7CiAgICAgICAgdGhpcy5heGlvcy5wb3N0KGBodHRwOi8vbG9jYWxob3N0OjgwODAvcmVnaXN0ZXIvd2lkZ2V0P2F1dGhfdG9rZW49JHt0aGlzLmF1dGhUb2tlbn0md2lkZ2V0X2lkPSR7d2lkZ2V0LmlkfSZ3aWRnZXRfdHlwZT0ke3dpZGdldC50eXBlfSZ3aWRnZXRfbmFtZT0ke3dpZGdldC5uYW1lfSZ3aWRnZXRfZGF0YT0ke3dpZGdldC5kYXRhfWApOwogICAgICB9CiAgICAgIGlmIChyZXMuaWQgIT09ICdub25lJyAmJiByZXMuY29uZmlnICE9PSAnJykgewogICAgICAgIHZhciB4ID0gdGhpcy53aWRnZXRzLm1hcChmdW5jdGlvbihlKSB7IHJldHVybiBlLmlkOyB9KS5pbmRleE9mKHJlcy5jb25maWcpOwoKICAgICAgICB0aGlzLndpZGdldHNbeF0uZGF0YSA9IHJlcy5pZDsKICAgICAgICB0aGlzLndpZGdldHNbeF0ubmFtZSA9IHJlcy5uYW1lOwogICAgICAgIHRoaXMuYXhpb3MucG9zdChgaHR0cDovL2xvY2FsaG9zdDo4MDgwL3JlZ2lzdGVyL3dpZGdldD9hdXRoX3Rva2VuPSR7dGhpcy5hdXRoVG9rZW59JndpZGdldF9pZD0ke3RoaXMud2lkZ2V0c1t4XS5pZH0md2lkZ2V0X3R5cGU9JHt0aGlzLndpZGdldHNbeF0udHlwZX0md2lkZ2V0X25hbWU9JHt0aGlzLndpZGdldHNbeF0ubmFtZX0md2lkZ2V0X2RhdGE9JHt0aGlzLndpZGdldHNbeF0uZGF0YX1gKTsKICAgICAgfQogICAgfSwKICAgIHRvZ2dsZURlZXplclJlbGF0ZWRBcnRpc3RzKCkgewogICAgICBpZiAodGhpcy5kZWV6ZXJUb2tlbiA9PT0gMCkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB0aGlzLmRlZXplclJlbGF0ZWRBcnRpc3RzU3RhdGUgPSAnaXMtYWN0aXZlJzsKICAgIH0sCiAgICB1cGRhdGVEZWV6ZXJSZWxhdGVkQXJ0aXN0cyhyZXMpIHsKICAgICAgdGhpcy5jb25maWdXaWRnZXRJZCA9ICcnOwogICAgICB0aGlzLmRlZXplclJlbGF0ZWRBcnRpc3RzU3RhdGUgPSByZXMuc3RhdGU7CiAgICAgIGlmIChyZXMuaWQgIT09ICJub25lIiAmJiByZXMuY29uZmlnID09PSAnJykgewogICAgICAgIHZhciB3aWRnZXQgPSBuZXcgV2lkZ2V0KCdkZWV6ZXJSZWxhdGVkQXJ0aXN0cycsIHJlcy5pZCwgcmVzLm5hbWUsIDApOwoKICAgICAgICB0aGlzLndpZGdldHMudW5zaGlmdCh3aWRnZXQpOwogICAgICAgIHRoaXMuYXhpb3MucG9zdChgaHR0cDovL2xvY2FsaG9zdDo4MDgwL3JlZ2lzdGVyL3dpZGdldD9hdXRoX3Rva2VuPSR7dGhpcy5hdXRoVG9rZW59JndpZGdldF9pZD0ke3dpZGdldC5pZH0md2lkZ2V0X3R5cGU9JHt3aWRnZXQudHlwZX0md2lkZ2V0X25hbWU9JHt3aWRnZXQubmFtZX0md2lkZ2V0X2RhdGE9JHt3aWRnZXQuZGF0YX1gKTsKICAgICAgfQogICAgICBpZiAocmVzLmlkICE9PSAnbm9uZScgJiYgcmVzLmNvbmZpZyAhPT0gJycpIHsKICAgICAgICB2YXIgeCA9IHRoaXMud2lkZ2V0cy5tYXAoZnVuY3Rpb24oZSkgeyByZXR1cm4gZS5pZDsgfSkuaW5kZXhPZihyZXMuY29uZmlnKTsKCiAgICAgICAgdGhpcy53aWRnZXRzW3hdLmRhdGEgPSByZXMuaWQ7CiAgICAgICAgdGhpcy53aWRnZXRzW3hdLm5hbWUgPSByZXMubmFtZTsKICAgICAgICB0aGlzLmF4aW9zLnBvc3QoYGh0dHA6Ly9sb2NhbGhvc3Q6ODA4MC9yZWdpc3Rlci93aWRnZXQ/YXV0aF90b2tlbj0ke3RoaXMuYXV0aFRva2VufSZ3aWRnZXRfaWQ9JHt0aGlzLndpZGdldHNbeF0uaWR9JndpZGdldF90eXBlPSR7dGhpcy53aWRnZXRzW3hdLnR5cGV9JndpZGdldF9uYW1lPSR7dGhpcy53aWRnZXRzW3hdLm5hbWV9JndpZGdldF9kYXRhPSR7dGhpcy53aWRnZXRzW3hdLmRhdGF9YCk7CiAgICAgIH0KICAgIH0sCiAgICAvLwogICAgLy8gIFdpZGdldCdzIHR3ZWFrcwogICAgLy8KICAgIG1vZGlmeVdpZGdldCh3aWRnZXQpIHsKICAgICAgdGhpcy5jb25maWdXaWRnZXRJZCA9IHdpZGdldC5pZDsKICAgICAgaWYgKHdpZGdldC50eXBlID09PSAnc3BvdGlmeUxhc3RTb25ncycpIHsKICAgICAgICB0aGlzLnRvZ2dsZVNwb3RpZnlMYXN0U29uZ3MoKTsKICAgICAgfQogICAgICBpZiAod2lkZ2V0LnR5cGUgPT09ICdzcG90aWZ5VG9wVHJhY2tzJykgewogICAgICAgIHRoaXMudG9nZ2xlU3BvdGlmeVRvcFRyYWNrcygpOwogICAgICB9CiAgICAgIGlmICh3aWRnZXQudHlwZSA9PT0gJ3Nwb3RpZnlSZWxhdGVkQXJ0aXN0cycpIHsKICAgICAgICB0aGlzLnRvZ2dsZVNwb3RpZnlSZWxhdGVkQXJ0aXN0cygpOwogICAgICB9CiAgICAgIGlmICh3aWRnZXQudHlwZSA9PT0gJ2RlZXplckxhc3RTb25ncycpIHsKICAgICAgICB0aGlzLnRvZ2dsZURlZXplckxhc3RTb25ncygpOwogICAgICB9CiAgICAgIGlmICh3aWRnZXQudHlwZSA9PT0gJ2RlZXplclRvcFRyYWNrcycpIHsKICAgICAgICB0aGlzLnRvZ2dsZURlZXplclRvcFRyYWNrcygpOwogICAgICB9CiAgICAgIGlmICh3aWRnZXQudHlwZSA9PT0gJ2RlZXplclJlbGF0ZWRBcnRpc3RzJykgewogICAgICAgIHRoaXMudG9nZ2xlRGVlemVyUmVsYXRlZEFydGlzdHMoKTsKICAgICAgfQogICAgfSwKICAgIG1vdmVEb3duV2lkZ2V0KHdpZGdldCkgewogICAgICB2YXIgeCA9IHRoaXMud2lkZ2V0cy5tYXAoZnVuY3Rpb24oZSkgeyByZXR1cm4gZS5pZDsgfSkuaW5kZXhPZih3aWRnZXQuaWQpOwoKICAgICAgaWYgKHggPT09IHRoaXMud2lkZ2V0cy5sZW5ndGggLSAxKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHRoaXMud2lkZ2V0c1t4XSA9IHRoaXMud2lkZ2V0cy5zcGxpY2UoeCArIDEsIDEsIHRoaXMud2lkZ2V0c1t4XSlbMF07CiAgICB9LAogICAgbW92ZVVwV2lkZ2V0KHdpZGdldCkgewogICAgICB2YXIgeCA9IHRoaXMud2lkZ2V0cy5tYXAoZnVuY3Rpb24oZSkgeyByZXR1cm4gZS5pZDsgfSkuaW5kZXhPZih3aWRnZXQuaWQpIC0gMTsKCiAgICAgIGlmICh4ID09PSAtMSkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB0aGlzLndpZGdldHNbeF0gPSB0aGlzLndpZGdldHMuc3BsaWNlKHggKyAxLCAxLCB0aGlzLndpZGdldHNbeF0pWzBdOwogICAgfSwKICAgIGRlbGV0ZVdpZGdldCh3aWRnZXQpIHsKICAgICAgdmFyIHggPSB0aGlzLndpZGdldHMubWFwKGZ1bmN0aW9uKGUpIHsgcmV0dXJuIGUuaWQ7IH0pLmluZGV4T2Yod2lkZ2V0LmlkKTsKCiAgICAgIHRoaXMuYXhpb3MucG9zdChgaHR0cDovL2xvY2FsaG9zdDo4MDgwL3JlbW92ZS93aWRnZXQ/d2lkZ2V0X2lkPSR7dGhpcy53aWRnZXRzW3hdLmlkfWApOwogICAgICB0aGlzLndpZGdldHMuc3BsaWNlKHgsIDEpOwogICAgfQogIH0sCn0K"},{"version":3,"sources":["Home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"Home.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"columns bg-2\" style=\"min-height: 94vh; margin-top: inherit;\">\n    <div class=\"column is-3\" style=\"border-right: 1px solid #404040;\">\n      <aside class=\"menu has-text-white\" style=\"padding: 15px;\">\n        <p class=\"menu-label has-text-white\">\n          Services disponibles\n        </p>\n        <div v-if=\"authToken !== 0\">\n          <ul class=\"menu-list\">\n            <li>\n              <span>Spotify</span>\n              <button v-if=\"spotifyToken === 0\" class=\"is-pulled-right button-light\" style=\"margin-top: -0.5rem;\" @click=\"loginSpotify()\">Se connecter</button>\n              <button v-if=\"spotifyToken !== 0\" class=\"is-pulled-right button-dark\" style=\"margin-top: -0.5rem;\" @click=\"logoutSpotify()\">Déconnecter</button>\n              <ul>\n                <li><a class=\"widget-link\" @click=\"toggleSpotifyLastSongs()\">Dernières sorties d'un artiste</a></li>\n                <li><a class=\"widget-link\" @click=\"toggleSpotifyTopTracks()\">Meilleurs morceaux d'un artiste</a></li>\n                <li><a class=\"widget-link\" @click=\"toggleSpotifyRelatedArtists()\">Artistes associés à un artiste</a></li>\n              </ul>\n            </li>\n            <li>\n              <span>Deezer</span>\n              <button v-if=\"deezerToken === 0\" class=\"is-pulled-right button-light\" style=\"margin-top: -0.5rem;\" @click=\"loginDeezer()\">Se connecter</button>\n              <button v-if=\"deezerToken !== 0\" class=\"is-pulled-right button-dark\" style=\"margin-top: -0.5rem;\" @click=\"logoutDeezer()\">Déconnecter</button>\n              <ul>\n                <li><a class=\"widget-link\" @click=\"toggleDeezerLastSongs()\">Dernières sorties d'un artiste</a></li>\n                <li><a class=\"widget-link\" @click=\"toggleDeezerTopTracks()\">Meilleurs morceaux d'un artiste</a></li>\n                <li><a class=\"widget-link\" @click=\"toggleDeezerRelatedArtists()\">Artistes associés à un artiste</a></li>\n              </ul>\n            </li>\n          </ul>\n        </div>\n        <div class=\"notification bg-1 border\" v-if=\"authToken === 0\">\n          <p class=\"title is-6 color-3\">Veuillez-vous connecter pour ajouter des widgets.</p>\n        </div>\n        <p class=\"menu-label has-text-white\">\n          Mes widgets\n        </p>\n        <ul class=\"menu-list\">\n          <li>\n            <div v-for=\"widget in widgets\" :key=\"widget.id\" class=\"notification bg-1 border\">\n                <span class=\"color-3\"><b>{{ widget.name }}</b> - {{ widget.type }}</span>\n                <div class=\"dropdown is-hoverable is-pulled-right\">\n                  <div class=\"dropdown-trigger\">\n                    <button class=\"button is-small\" aria-haspopup=\"true\" aria-controls=\"dropdown-menu3\" style=\"background: inherit; color: white; margin-top: -0.2rem;\">\n                      <span class=\"icon is-small\">\n                        <i class=\"fas fa-angle-down\" aria-hidden=\"true\"></i>\n                      </span>\n                    </button>\n                  </div>\n                  <div class=\"dropdown-menu\" id=\"dropdown-menu3\" role=\"menu\">\n                    <div class=\"dropdown-content\">\n                      <a href=\"#\" class=\"dropdown-item\" @click=\"modifyWidget(widget)\">Modifier</a>\n                      <a href=\"#\" class=\"dropdown-item\" @click=\"moveUpWidget(widget)\">Monter</a>\n                      <a href=\"#\" class=\"dropdown-item\" @click=\"moveDownWidget(widget)\">Descendre</a>\n                      <a href=\"#\" class=\"dropdown-item\" @click=\"deleteWidget(widget)\">Supprimer</a>\n                    </div>\n                  </div>\n                </div>\n            </div>\n          </li>\n        </ul>\n      </aside>\n    </div>\n    <div class=\"column is-9\">\n      <div v-for=\"widget in widgets\" :key=\"widget.id\" class=\"container bg-1 border widget\">\n        <SpotifyLastSongs :id=\"widget.data\" :name=\"widget.name\" :token=\"spotifyToken.toString()\" v-if=\"widget.type === 'spotifyLastSongs'\" />\n        <SpotifyTopTracks :id=\"widget.data\" :name=\"widget.name\" :token=\"spotifyToken.toString()\" v-if=\"widget.type === 'spotifyTopTracks'\" />\n        <SpotifyRelatedArtists :id=\"widget.data\" :name=\"widget.name\" :token=\"spotifyToken.toString()\" v-if=\"widget.type === 'spotifyRelatedArtists'\" />\n        <DeezerLastSongs :id=\"widget.data.toString()\" :name=\"widget.name\" v-if=\"widget.type === 'deezerLastSongs'\" />\n        <DeezerTopTracks :id=\"widget.data.toString()\" :name=\"widget.name\" v-if=\"widget.type === 'deezerTopTracks'\" />\n        <DeezerRelatedArtists :id=\"widget.data.toString()\" :name=\"widget.name\" v-if=\"widget.type === 'deezerRelatedArtists'\" />\n      </div>\n    </div>\n    <SpotifyLastSongsConfig :config=\"configWidgetId\" :token=\"spotifyToken.toString()\" :state=\"spotifyLastSongsState\" @update-state=\"updateSpotifyLastSongs\" />\n    <SpotifyTopTracksConfig :config=\"configWidgetId\" :token=\"spotifyToken.toString()\" :state=\"spotifyTopTracksState\" @update-state=\"updateSpotifyTopTracks\" />\n    <SpotifyRelatedArtistsConfig :config=\"configWidgetId\" :token=\"spotifyToken.toString()\" :state=\"spotifyRelatedArtistsState\" @update-state=\"updateSpotifyRelatedArtists\" />\n    <DeezerLastSongsConfig :config=\"configWidgetId\" :state=\"deezerLastSongsState\" @update-state=\"updateDeezerLastSongs\" />\n    <DeezerTopTracksConfig :config=\"configWidgetId\" :state=\"deezerTopTracksState\" @update-state=\"updateDeezerTopTracks\" />\n    <DeezerRelatedArtistsConfig :config=\"configWidgetId\" :state=\"deezerRelatedArtistsState\" @update-state=\"updateDeezerRelatedArtists\" />\n  </div>\n</template>\n\n<script>\nimport SpotifyLastSongsConfig from './SpotifyLastSongsConfig';\nimport SpotifyLastSongs from './SpotifyLastSongs';\nimport SpotifyTopTracksConfig from './SpotifyTopTracksConfig';\nimport SpotifyTopTracks from './SpotifyTopTracks';\nimport SpotifyRelatedArtistsConfig from './SpotifyRelatedArtistsConfig';\nimport SpotifyRelatedArtists from './SpotifyRelatedArtists';\nimport DeezerLastSongsConfig from './DeezerLastSongsConfig';\nimport DeezerLastSongs from './DeezerLastSongs';\nimport DeezerTopTracksConfig from './DeezerTopTracksConfig';\nimport DeezerTopTracks from './DeezerTopTracks';\nimport DeezerRelatedArtistsConfig from './DeezerRelatedArtistsConfig';\nimport DeezerRelatedArtists from './DeezerRelatedArtists';\n\nclass Widget {\n\n  constructor(type, data, name, id) {\n    if (id === 0) {\n      this.id = this.uuidv4();\n    } else {\n      this.id = id;\n    }\n    this.type = type;\n    this.name = name;\n    this.data = data;\n  }\n\n  uuidv4() {\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n      var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\n      return v.toString(16);\n    });\n  }\n}\n\nexport default {\n  name: 'home',\n  components: {\n    SpotifyLastSongsConfig,\n    SpotifyLastSongs,\n    SpotifyTopTracksConfig,\n    SpotifyTopTracks,\n    SpotifyRelatedArtistsConfig,\n    SpotifyRelatedArtists,\n    DeezerLastSongsConfig,\n    DeezerLastSongs,\n    DeezerTopTracksConfig,\n    DeezerTopTracks,\n    DeezerRelatedArtistsConfig,\n    DeezerRelatedArtists\n  },\n  created() {\n    var urlObject = (new URL(window.location.href)).searchParams;\n    var urlParams = this.getUrlVars();\n\n    if (this.authToken !== 0 && urlObject.get('spotify') === \"true\" && urlParams.access_token && this.spotifyToken === 0) {\n      this.axios.post(`http://localhost:8080/login/spotify?auth_token=${this.authToken}&spotify_token=${urlParams.access_token}/`)\n      .then((response) => {\n          localStorage.setItem('spotifyToken-' + this.authToken, urlParams.access_token);\n          this.$forceUpdate();\n      })\n    }\n    if (this.authToken !== 0 && urlObject.get('deezer') === \"true\" && urlParams.access_token && this.deezerToken === 0) {\n      this.axios.post(`http://localhost:8080/login/deezer?auth_token=${this.authToken}&deezer_token=${urlParams.access_token}/`)\n      .then((response) => {\n          localStorage.setItem('deezerToken-' + this.authToken, urlParams.access_token);\n          this.$forceUpdate();\n      })\n    }\n    if (this.authToken !== 0) {\n      this.axios.post(`http://localhost:8080/list/widget?auth_token=${this.authToken}`)\n      .then((response) => {\n        response.data.forEach(widget => {\n          this.widgets.unshift(new Widget(widget.type, widget.data, widget.name, widget.id));\n        });\n      });\n    }\n  },\n  data() {\n    return {\n      spotifyLastSongsState: '',\n      spotifyTopTracksState: '',\n      spotifyRelatedArtistsState: '',\n      deezerLastSongsState: '',\n      deezerTopTracksState: '',\n      deezerRelatedArtistsState: '',\n      configWidgetId: '',\n      widgets: [],\n      get authToken() {\n        return localStorage.getItem('authToken') || 0;\n      },\n      set authToken(value) {\n        localStorage.setItem('authToken', value);\n      },\n      get spotifyToken() {\n        return localStorage.getItem('spotifyToken-' + this.authToken) || 0;\n      },\n      set spotifyToken(value) {\n        localStorage.setItem('spotifyToken-' + this.authToken, value);\n      },\n      get deezerToken() {\n        return localStorage.getItem('deezerToken-' + this.authToken) || 0;\n      },\n      set deezerToken(value) {\n        localStorage.setItem('deezerToken-' + this.authToken, value);\n      }\n    }\n  },\n  methods: {\n    //\n    //  Login / Logout from Spotify+Deezer\n    //\n    loginSpotify() {\n      window.location.href = `https://accounts.spotify.com/authorize?client_id=1db60673fcf648a189dfac04beb7d735&redirect_uri=`\n      + encodeURI(\"https://localhost:3000?spotify=true\") + `&response_type=token`;\n    },\n    logoutSpotify() {\n      localStorage.removeItem('spotifyToken-' + this.authToken);\n      this.$forceUpdate();\n    },\n    loginDeezer() {\n      window.location.href = `https://connect.deezer.com/oauth/auth.php?app_id=386784&redirect_uri=`\n      + encodeURI(\"https://localhost:3000?deezer=true\") + `&perms=basic_access,email&response_type=token`;\n    },\n    logoutDeezer() {\n      localStorage.removeItem('deezerToken-' + this.authToken);\n      this.$forceUpdate();\n    },\n    //\n    //  Utilities\n    //\n    getUrlVars() {\n      var vars = {};\n      var parts = this.$route.path.replace(/[/?&]+([^=&]+)=([^&]*)/gi, function(m,key,value, value2) {\n          vars[key] = value;\n      });\n      return vars;\n    },\n    //\n    //  Widget's communication with configuration modal\n    //\n    toggleSpotifyLastSongs() {\n      if (this.spotifyToken === 0) {\n        return;\n      }\n      this.spotifyLastSongsState = 'is-active';\n    },\n    updateSpotifyLastSongs(res) {\n      this.configWidgetId = '';\n      this.spotifyLastSongsState = res.state;\n      if (res.id !== \"none\" && res.config === '') {\n        var widget = new Widget('spotifyLastSongs', res.id, res.name, 0);\n\n        this.widgets.unshift(widget);\n        this.axios.post(`http://localhost:8080/register/widget?auth_token=${this.authToken}&widget_id=${widget.id}&widget_type=${widget.type}&widget_name=${widget.name}&widget_data=${widget.data}`);\n      }\n      if (res.id !== 'none' && res.config !== '') {\n        var x = this.widgets.map(function(e) { return e.id; }).indexOf(res.config);\n\n        this.widgets[x].data = res.id;\n        this.widgets[x].name = res.name;\n        this.axios.post(`http://localhost:8080/register/widget?auth_token=${this.authToken}&widget_id=${this.widgets[x].id}&widget_type=${this.widgets[x].type}&widget_name=${this.widgets[x].name}&widget_data=${this.widgets[x].data}`);\n      }\n    },\n    toggleSpotifyTopTracks() {\n      if (this.spotifyToken === 0) {\n        return;\n      }\n      this.spotifyTopTracksState = 'is-active';\n    },\n    updateSpotifyTopTracks(res) {\n      this.configWidgetId = '';\n      this.spotifyTopTracksState = res.state;\n      if (res.id !== \"none\" && res.config === '') {\n        var widget = new Widget('spotifyTopTracks', res.id, res.name, 0);\n\n        this.widgets.unshift(widget);\n        this.axios.post(`http://localhost:8080/register/widget?auth_token=${this.authToken}&widget_id=${widget.id}&widget_type=${widget.type}&widget_name=${widget.name}&widget_data=${widget.data}`);\n      }\n      if (res.id !== 'none' && res.config !== '') {\n        var x = this.widgets.map(function(e) { return e.id; }).indexOf(res.config);\n\n        this.widgets[x].data = res.id;\n        this.widgets[x].name = res.name;\n        this.axios.post(`http://localhost:8080/register/widget?auth_token=${this.authToken}&widget_id=${this.widgets[x].id}&widget_type=${this.widgets[x].type}&widget_name=${this.widgets[x].name}&widget_data=${this.widgets[x].data}`);\n      }\n    },\n    toggleSpotifyRelatedArtists() {\n      if (this.spotifyToken === 0) {\n        return;\n      }\n      this.spotifyRelatedArtistsState = 'is-active';\n    },\n    updateSpotifyRelatedArtists(res) {\n      this.configWidgetId = '';\n      this.spotifyRelatedArtistsState = res.state;\n      if (res.id !== \"none\" && res.config === '') {\n        var widget = new Widget('spotifyRelatedArtists', res.id, res.name, 0);\n\n        this.widgets.unshift(widget);\n        this.axios.post(`http://localhost:8080/register/widget?auth_token=${this.authToken}&widget_id=${widget.id}&widget_type=${widget.type}&widget_name=${widget.name}&widget_data=${widget.data}`);\n      }\n      if (res.id !== 'none' && res.config !== '') {\n        var x = this.widgets.map(function(e) { return e.id; }).indexOf(res.config);\n\n        this.widgets[x].data = res.id;\n        this.widgets[x].name = res.name;\n        this.axios.post(`http://localhost:8080/register/widget?auth_token=${this.authToken}&widget_id=${this.widgets[x].id}&widget_type=${this.widgets[x].type}&widget_name=${this.widgets[x].name}&widget_data=${this.widgets[x].data}`);\n      }\n    },\n    toggleDeezerLastSongs() {\n      if (this.deezerToken === 0) {\n        return;\n      }\n      this.deezerLastSongsState = 'is-active';\n    },\n    updateDeezerLastSongs(res) {\n      this.configWidgetId = '';\n      this.deezerLastSongsState = res.state;\n      if (res.id !== \"none\" && res.config === '') {\n        var widget = new Widget('deezerLastSongs', res.id, res.name, 0);\n\n        this.widgets.unshift(widget);\n        this.axios.post(`http://localhost:8080/register/widget?auth_token=${this.authToken}&widget_id=${widget.id}&widget_type=${widget.type}&widget_name=${widget.name}&widget_data=${widget.data}`);\n      }\n      if (res.id !== 'none' && res.config !== '') {\n        var x = this.widgets.map(function(e) { return e.id; }).indexOf(res.config);\n\n        this.widgets[x].data = res.id;\n        this.widgets[x].name = res.name;\n        this.axios.post(`http://localhost:8080/register/widget?auth_token=${this.authToken}&widget_id=${this.widgets[x].id}&widget_type=${this.widgets[x].type}&widget_name=${this.widgets[x].name}&widget_data=${this.widgets[x].data}`);\n      }\n    },\n    toggleDeezerTopTracks() {\n      if (this.deezerToken === 0) {\n        return;\n      }\n      this.deezerTopTracksState = 'is-active';\n    },\n    updateDeezerTopTracks(res) {\n      this.configWidgetId = '';\n      this.deezerTopTracksState = res.state;\n      if (res.id !== \"none\" && res.config === '') {\n        var widget = new Widget('deezerTopTracks', res.id, res.name, 0);\n\n        this.widgets.unshift(widget);\n        this.axios.post(`http://localhost:8080/register/widget?auth_token=${this.authToken}&widget_id=${widget.id}&widget_type=${widget.type}&widget_name=${widget.name}&widget_data=${widget.data}`);\n      }\n      if (res.id !== 'none' && res.config !== '') {\n        var x = this.widgets.map(function(e) { return e.id; }).indexOf(res.config);\n\n        this.widgets[x].data = res.id;\n        this.widgets[x].name = res.name;\n        this.axios.post(`http://localhost:8080/register/widget?auth_token=${this.authToken}&widget_id=${this.widgets[x].id}&widget_type=${this.widgets[x].type}&widget_name=${this.widgets[x].name}&widget_data=${this.widgets[x].data}`);\n      }\n    },\n    toggleDeezerRelatedArtists() {\n      if (this.deezerToken === 0) {\n        return;\n      }\n      this.deezerRelatedArtistsState = 'is-active';\n    },\n    updateDeezerRelatedArtists(res) {\n      this.configWidgetId = '';\n      this.deezerRelatedArtistsState = res.state;\n      if (res.id !== \"none\" && res.config === '') {\n        var widget = new Widget('deezerRelatedArtists', res.id, res.name, 0);\n\n        this.widgets.unshift(widget);\n        this.axios.post(`http://localhost:8080/register/widget?auth_token=${this.authToken}&widget_id=${widget.id}&widget_type=${widget.type}&widget_name=${widget.name}&widget_data=${widget.data}`);\n      }\n      if (res.id !== 'none' && res.config !== '') {\n        var x = this.widgets.map(function(e) { return e.id; }).indexOf(res.config);\n\n        this.widgets[x].data = res.id;\n        this.widgets[x].name = res.name;\n        this.axios.post(`http://localhost:8080/register/widget?auth_token=${this.authToken}&widget_id=${this.widgets[x].id}&widget_type=${this.widgets[x].type}&widget_name=${this.widgets[x].name}&widget_data=${this.widgets[x].data}`);\n      }\n    },\n    //\n    //  Widget's tweaks\n    //\n    modifyWidget(widget) {\n      this.configWidgetId = widget.id;\n      if (widget.type === 'spotifyLastSongs') {\n        this.toggleSpotifyLastSongs();\n      }\n      if (widget.type === 'spotifyTopTracks') {\n        this.toggleSpotifyTopTracks();\n      }\n      if (widget.type === 'spotifyRelatedArtists') {\n        this.toggleSpotifyRelatedArtists();\n      }\n      if (widget.type === 'deezerLastSongs') {\n        this.toggleDeezerLastSongs();\n      }\n      if (widget.type === 'deezerTopTracks') {\n        this.toggleDeezerTopTracks();\n      }\n      if (widget.type === 'deezerRelatedArtists') {\n        this.toggleDeezerRelatedArtists();\n      }\n    },\n    moveDownWidget(widget) {\n      var x = this.widgets.map(function(e) { return e.id; }).indexOf(widget.id);\n\n      if (x === this.widgets.length - 1) {\n        return;\n      }\n      this.widgets[x] = this.widgets.splice(x + 1, 1, this.widgets[x])[0];\n    },\n    moveUpWidget(widget) {\n      var x = this.widgets.map(function(e) { return e.id; }).indexOf(widget.id) - 1;\n\n      if (x === -1) {\n        return;\n      }\n      this.widgets[x] = this.widgets.splice(x + 1, 1, this.widgets[x])[0];\n    },\n    deleteWidget(widget) {\n      var x = this.widgets.map(function(e) { return e.id; }).indexOf(widget.id);\n\n      this.axios.post(`http://localhost:8080/remove/widget?widget_id=${this.widgets[x].id}`);\n      this.widgets.splice(x, 1);\n    }\n  },\n}\n</script>\n\n<style>\n.widget-link {\n  font-weight: bold;\n  color:#00d1b2 !important;\n}\n\n.widget-link:hover {\n background-color: #323233 !important;\n}\n\n.widget-link:after {\n  content: \"+\";\n  float: right;\n}\n\n.widget {\n  padding: 20px;\n  margin-top: 20px !important;\n}\n\n.border {\n  border: 1px solid #404040;\n}\n\n</style>"]}]}